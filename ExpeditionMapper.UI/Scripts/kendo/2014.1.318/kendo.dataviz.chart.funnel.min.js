/*
* Kendo UI Complete v2014.1.318 (http://kendoui.com)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.dataviz.chart.min"],e)}(function(){return function(e,t){var n=window.kendo,i=n.deepExtend,r=e.extend,o=n.isFunction,a=n.template,s=n.dataviz,l=s.Color,d=s.ChartElement,c=s.PlotAreaBase,u=s.PlotAreaFactory,p=s.Point2D,f=s.Box2D,h=s.SeriesBinder,g=s.TextBox,m=s.append,v=s.autoFormat,_=s.evalOptions,k=s.limitValue,b=s.uniqueId,y="category",w="color",x="funnel",C="value",T="black",S="white",D=c.extend({render:function(){var e=this,t=e.series;e.createFunnelChart(t)},createFunnelChart:function(e){var t=this,n=e[0],i=new A(t,{series:e,legend:t.options.legend,neckRatio:n.neckRatio,dynamicHeight:n.dynamicHeight,dynamicSlope:n.dynamicSlope,segmentSpacing:n.segmentSpacing,highlight:n.highlight});t.appendChart(i)},appendChart:function(e,t){c.fn.appendChart.call(this,e,t),m(this.options.legend.items,e.legendItems)}}),A=d.extend({init:function(e,t){var n=this;d.fn.init.call(n,t),n.plotArea=e,n.points=[],n.labels=[],n.legendItems=[],n.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(e,t){return v(t,e.value)},render:function(){var e,t,n,r,a,s,l,d=this,c=d.options,u=d.plotArea.options.seriesColors||[],p=u.length,f=c.series[0],g=f.data;if(g)for(n=d.pointsTotal(f),a=0;g.length>a;a++)e=h.current.bindPoint(f,a),r=e.valueFields.value,t=e.fields,o(f.color)||(f.color=t.color||u[a%p]),t=i({index:a,owner:d,series:f,category:t.category,dataItem:g[a],percentage:r/n,visibleInLegend:t.visibleInLegend,visible:t.visible},t),s=d.createSegment(r,t),l=d.createLabel(r,t),s&&l&&s.append(l)},evalSegmentOptions:function(e,t,n){var i=n.series;_(e,{value:t,series:i,dataItem:n.dataItem,index:n.index},{defaults:i._defaults,excluded:["data"]})},createSegment:function(e,n){var o,a,s=this;return s.createLegendItem(e,n),n.visible!==!1?(a=i({},n.series),s.evalSegmentOptions(a,e,n),o=new E(e,a,n),r(o,n),s.append(o),s.points.push(o),o):t},createLabel:function(e,n){var r,o,s,d=this,c=n.series,u=n.dataItem,p=i({},d.options.labels,c.labels),f=e;return p.visible&&e?(p.template?(o=a(p.template),f=o({dataItem:u,value:e,percentage:n.percentage,category:n.category,series:c})):p.format&&(f=v(p.format,f)),p.color||"center"!==p.align||(s=new l(c.color).percBrightness(),p.color=s>180?T:S),d.evalSegmentOptions(p,e,n),r=new g(f,i({vAlign:p.position,id:b()},p)),d.labels.push(r),r):t},createLegendItem:function(e,t){var n,i,r,o,s=this,l=(s.options.legend||{}).labels||{},d=(s.options.legend||{}).inactiveItems||{};t&&t.visibleInLegend!==!1&&(n=t.category||"",(l||{}).template&&(i=a(l.template),n=i({text:n,series:t.series,dataItem:t.dataItem,percentage:t.percentage,value:e})),t.visible===!1?(r=(d.markers||{}).color,o=(d.labels||{}).color):(r=(t.series||{}).color,o=l.color),n&&s.legendItems.push({pointIndex:t.index,text:n,series:t.series,markerColor:r,labelColor:o}))},pointsTotal:function(e){var t,n,i,r=e.data,o=r.length,a=0;for(n=0;o>n;n++)i=h.current.bindPoint(e,n),t=i.valueFields.value,"string"==typeof t&&(t=parseFloat(t)),t&&i.fields.visible!==!1&&(a+=t);return a},labelPadding:function(){var e,t,n,i,r=this.labels,o={left:0,right:0};for(i=0;r.length>i;i++)e=r[i],t=e.options.align,"center"!==t&&(n=r[i].box.width(),"left"===t?o.left=Math.max(o.left,n):o.right=Math.max(o.right,n));return o},reflow:function(t){var n,i,r,o,a,s,l,d,c,u,f,h,g=this,m=g.options,v=g.points,_=v.length,b=1>=m.neckRatio,y=t.clone().unpad(g.labelPadding()),w=y.width(),x=0,C=b?0:(w-w/m.neckRatio)/2,T=m.segmentSpacing,S=m.dynamicSlope,D=y.height()-T*(_-1),A=b?m.neckRatio*w:w;if(_){if(S)for(l=v[0],d=l,e.each(v,function(e,t){t.percentage>d.percentage&&(d=t)}),r=l.percentage/d.percentage*w,C=(w-r)/2,n=0;_>n;n++)a=v[n].percentage,c=v[n+1],u=c?c.percentage:a,o=v[n].points=[],i=m.dynamicHeight?D*a:D/_,s=(w-r*(u/a))/2,s=k(s,0,w),o.push(p(y.x1+C,y.y1+x)),o.push(p(y.x1+w-C,y.y1+x)),o.push(p(y.x1+w-s,y.y1+i+x)),o.push(p(y.x1+s,y.y1+i+x)),C=s,x+=i+T,r*=u/a,r=k(r,0,w);else for(f=b?w:w-2*C,h=(f-A)/2,n=0;_>n;n++)o=v[n].points=[],a=v[n].percentage,s=m.dynamicHeight?h*a:h/_,i=m.dynamicHeight?D*a:D/_,o.push(p(y.x1+C,y.y1+x)),o.push(p(y.x1+w-C,y.y1+x)),o.push(p(y.x1+w-C-s,y.y1+i+x)),o.push(p(y.x1+C+s,y.y1+i+x)),C+=s,x+=i+T;for(n=0;_>n;n++)v[n].reflow(t)}}}),E=d.extend({init:function(e,t,n){var i=this;d.fn.init.call(i,t),i.value=e,i.id=b(),i.options.index=n.index,i.enableDiscovery()},options:{color:S,border:{width:1}},reflow:function(e){var t=this,n=t.points,i=t.children[0];t.box=new f(n[0].x,n[0].y,n[1].x,n[2].y),i&&i.reflow(new f(e.x1,n[0].y,e.x2,n[2].y))},getViewElements:function(e){var t=this,n=t.options,i=n.border,r=[];return r.push(e.createPolyline(t.points,!0,{id:t.id,fill:n.color,fillOpacity:n.opacity,stroke:i.color,strokeOpacity:i.opacity,strokeWidth:i.width,data:{modelId:t.modelId}})),m(r,d.fn.getViewElements.call(t,e)),r},highlightOverlay:function(e,t){var n,i,o,a=this.options,s=a.highlight||{};if(s.visible!==!1)return n=s.border||{},i=r({},t,{fill:s.color,stroke:n.color,strokeOpacity:n.opacity,strokeWidth:n.width,fillOpacity:s.opacity,data:{modelId:this.modelId}}),o=e.createPolyline(this.points,!0,i)},tooltipAnchor:function(e){var t=this.box;return new p(t.center().x-e/2,t.y1)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}});i(E.fn,s.PointEventsMixin),u.current.register(D,[x]),h.current.register([x],[C],[y,w,"visibleInLegend","visible"]),i(s,{FunnelChart:A})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});