@using System.Collections
@using Mapper21.UI.Models

@(Html.Kendo().Grid<ScienceBigIdeaViewModel>
      ()
      .Name("grid3")
      .Columns(columns =>
      {
          columns.ForeignKey(h => h.BigIdeaForScienceId, (IEnumerable) ViewData["BigIdeaForScienceList"], dataFieldText: "Text", dataFieldValue: "Value").EditorTemplateName("ScienceBigIdeaDropDownList");
          columns.Bound(b => b.Context);
          columns.Command(commands =>
          {
              commands.Edit(); // The "edit" command will edit and update data items
              commands.Destroy(); // The "destroy" command removes data items
          }).Title("Commands").Width(200);
      })
      .ToolBar(toolbar =>
      {
          toolbar.Create(); // The "create" command adds new data items
          //toolbar.Save(); // The "save" command saves the changed data items
      })
      // .Editable(editable => editable.Mode(GridEditMode.InCell)) // Use in-cell editing mode
      .Editable(editable => editable.Mode(GridEditMode.InLine))
      .DataSource(dataSource =>
          dataSource.Ajax()
              //.Batch(true) // Enable batch updates
              .Model(model =>
              {
                  model.Id(g => g.Id); // Specify the property which is the unique identifier of the model
                  model.Field(g => g.Id).Editable(false).DefaultValue(Guid.NewGuid()); // Make the Id property not editable
                  model.Field(g => g.SectionId).DefaultValue(@ViewBag.SectionId);
              })
              .Create(create => create.Action("ScienceBigIdea_Create", "ScienceBigIdea")) // Action method invoked when the user saves a new data item
              .Read(read => read.Action("ScienceBigIdea_Read", "ScienceBigIdea", new { sectionId = ViewBag.SectionId })) // Action method invoked when the grid needs data
              .Update(update => update.Action("ScienceBigIdea_Update", "ScienceBigIdea")) // Action method invoked when the user saves an updated data item
              .Destroy(destroy => destroy.Action("ScienceBigIdea_Destroy", "ScienceBigIdea")) // Action method invoked when the user removes a data item
      )
      .Pageable()
      )